{{/*

BOOSTER-WEB: Web interface to BOOSTER (https://github.com/evolbioinfo/booster)
Alternative method to compute bootstrap branch supports in large trees.

Copyright (C) 2017 BOOSTER-WEB dev team

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

*/}}

{{ define "title" }}
BOOSTER - Run
{{end}}

{{ define "libs" }}
{{ end }}

{{ define "content"}}

<form action="/run" method="POST" enctype="multipart/form-data">
  {{if .GalaxyProcessor }}
  <fieldset class="form-group">
    <legend class="fieldset-border">You have input sequences (fasta format)</legend>
    <div>
      <label for="refalign">Input Sequences</label>
      <input type="file" class="form-control-file" id="refalign" aria-describedby="refAlignHelp" name="refalign" />
      <small id="refAlignHelp" class="form-text text-muted">Input sequence alignment (Fasta/Phylip/Nexus format, possibly gzipped with extension .gz only).
	If given, one of the <a href="https://ngphylogeny.fr/workflows/oneclick/">NGPhylogeny.fr oneclick</a> workflows will be executed to build reference and bootstrap trees,
	and no tree file given below will be taken into account.</small>
    </div>
    <div>
      <label for="nboot">Number of Bootstrap replicates (<span id="nboottext"></span>)</label>
      <select id="nboot" name="nboot" class="form-control" aria-describedby="nbootHelp" onchange="updateNbootInput(this.value);">
	<option value="100">100</option>
	<option value="200" selected>200</option>
	<option value="300">300</option>
	<option value="400">400</option>
	<option value="500">500</option>
	<option value="600">600</option>
	<option value="700">700</option>
	<option value="800">800</option>
	<option value="900">900</option>
	<option value="1000">1000</option>
      </select>
      <small id="nbootHelp" class="form-text text-muted">Number of Bootstrap replicates</small>
    </div>
    <div>
      <label for="workflow">Workflow to run</label>
      <select id="workflow" name="workflow" class="form-control" aria-describedby="workflowHelp">
	<option value="PhyML-SMS" selected>NGPhylogeny.fr PhyML-SMS oneclick (slower, for small/medium datasets)</option>
	<option value="FastTree">NGPhylogeny.fr FastTree oneclick (faster, for large datasets)</option>
      </select>
      <small id="workflowHelp" class="form-text text-muted">Choose the phylogenetic workflow to run: 1) PhyML-SMS or 2) FastTree. These are the "oneclick" workflows defined in <a href="https://ngphylogeny.fr/workflows/oneclick/">ngphylogeny.fr</a>.</small>
    </div>
  </fieldset>
  {{ end }}
  <fieldset class="form-group">
    <legend class="fieldset-border">You have reference and bootstrap trees</legend>
    <div>
      <label for="reftree">Reference tree</label>
      <input type="file" class="form-control-file" id="reftree" aria-describedby="refTreeHelp" name="reftree" />
      <small id="refTreeHelp" class="form-text text-muted">The tree must be in Newick format, and may be gzipped (extension .gz only)</small>
    </div>
    <div>
      <label for="boottrees">Bootstrap trees</label>
      <input type="file" class="form-control-file" id="boottrees" aria-describedby="bootTreeHelp" name="boottrees" />
      <small id="bootTreeHelp" class="form-text text-muted">All bootstrap trees must be in one single file, in newick format, and may be gzipped (extension .gz only)</small>
    </div>
  </fieldset>
  {{if .EmailNotification }}
  <fieldset class="form-group">
    <legend class="fieldset-border">In any case</legend>
    <div>
      <label for="email">E-Mail</label>
      <input id="email" name="email" class="form-control" type="text" aria-describedby="emailHelp"/>
      <small id="emailHelp" class="form-text text-muted">Enter your e-mail if you want to be notified as soon as the job is finished</small>
    </div>
  </fieldset>
  {{ end }}
 
  <button type="submit" class="btn btn-primary">Run</button>
</form>

{{ end }}
